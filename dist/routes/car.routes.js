"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CarRouter = void 0;
const express_1 = require("express");
const ensureRequestData_middleware_1 = require("../middlewares/ensureRequestData.middleware");
const car_schema_1 = require("../schemas/car.schema");
const ensureIdExists_middleware_1 = require("../middlewares/ensureIdExists.middleware");
const carImage_controller_1 = require("../controllers/carImage.controller");
const car_controller_1 = require("../controllers/car.controller");
const pagination_middleware_1 = require("../middlewares/pagination.middleware");
const ensureIsAuth_middleware_1 = require("../middlewares/ensureIsAuth.middleware");
const ensureUserIsSeller_middleware_1 = require("../middlewares/ensureUserIsSeller.middleware");
const ensureIsUserOwner_middleware_1 = require("../middlewares/ensureIsUserOwner.middleware");
exports.CarRouter = (0, express_1.Router)();
exports.CarRouter.get("", pagination_middleware_1.pagination, car_controller_1.listCarsController);
exports.CarRouter.get("/user", ensureIsAuth_middleware_1.ensureIsAuthMiddleware, pagination_middleware_1.pagination, car_controller_1.listCarFromUserController);
exports.CarRouter.get("/:id", ensureIdExists_middleware_1.ensureIdExistsMiddleware, car_controller_1.listCarByIdController);
exports.CarRouter.post("", ensureIsAuth_middleware_1.ensureIsAuthMiddleware, (0, ensureRequestData_middleware_1.EnsureRequestData)(car_schema_1.carRequestSchema), ensureUserIsSeller_middleware_1.ensureUserIsSeller, car_controller_1.createCarController);
exports.CarRouter.patch("/:id", ensureIsAuth_middleware_1.ensureIsAuthMiddleware, (0, ensureRequestData_middleware_1.EnsureRequestData)(car_schema_1.carUpdateSchema), ensureIdExists_middleware_1.ensureIdExistsMiddleware, ensureIsUserOwner_middleware_1.ensureIsUserOwner, ensureUserIsSeller_middleware_1.ensureUserIsSeller, car_controller_1.updateCarController);
exports.CarRouter.delete("/:id", ensureIsAuth_middleware_1.ensureIsAuthMiddleware, ensureIdExists_middleware_1.ensureIdExistsMiddleware, ensureIsUserOwner_middleware_1.ensureIsUserOwner, ensureUserIsSeller_middleware_1.ensureUserIsSeller, car_controller_1.deleteCarController);
exports.CarRouter.post("/car-Image/:id", ensureIsAuth_middleware_1.ensureIsAuthMiddleware, ensureIdExists_middleware_1.ensureIdExistsMiddleware, ensureIsUserOwner_middleware_1.ensureIsUserOwner, ensureUserIsSeller_middleware_1.ensureUserIsSeller, carImage_controller_1.createCarImageController);
exports.CarRouter.delete("/car-Image/:id/image:imageId", ensureIsAuth_middleware_1.ensureIsAuthMiddleware, ensureIdExists_middleware_1.ensureIdExistsMiddleware, ensureIsUserOwner_middleware_1.ensureIsUserOwner, ensureUserIsSeller_middleware_1.ensureUserIsSeller, carImage_controller_1.deleteCarImageController);
